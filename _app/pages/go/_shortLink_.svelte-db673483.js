import{S as a,i,s as c}from"../../chunks/vendor-5a586dca.js";import{s as u}from"../../chunks/meta-25d41ac1.js";import"../../chunks/canonical-900febc8.js";function f(t){try{return atob(t)}catch{return Buffer.from(t,"base64").toString()}}function l(t){const e=r=>{throw new Error(`Unable to reverse shortner the provided id "${t}". ${r}`)};try{const r=f(t),o=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(r);o||e("No matches pattern");const[,n,s]=o;return{preffix:n,id:s}}catch(r){e(r)}}async function $({params:t,fetch:e}){try{let{id:r,preffix:o}=l(t.shortLink);const n=await e(`/api/links/${o}/${r}`);if(n.status===200){const{url:s}=await n.json();return{redirect:s,status:302}}}catch(r){console.log(r)}return{status:404,error:new Error("Link not found")}}function d(t){return u("Go to"),[]}class w extends a{constructor(e){super();i(this,e,d,null,c,{})}}export{w as default,$ as load};
