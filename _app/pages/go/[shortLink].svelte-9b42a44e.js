import{S as c,i,s as u}from"../../chunks/vendor-4707b3b4.js";import{s as f}from"../../chunks/meta-fc16225c.js";import"../../chunks/canonical-e5246bc6.js";function l(t){try{return atob(t)}catch{return Buffer.from(t,"base64").toString()}}function d(t){const e=r=>{throw new Error(`Unable to reverse shortner the provided id "${t}". ${r}`)};try{const r=l(t),n=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(r);n||e("No matches pattern");const[,s,o]=n;return{preffix:s,id:o}}catch(r){e(r)}}async function k({page:t,fetch:e}){const r=t.params;try{let{id:n,preffix:s}=d(r.shortLink);const o=await e(`/api/links/${s}/${n}`);if(o.status===200){const{url:a}=await o.json();return{redirect:a,status:302}}}catch(n){console.log(n)}return{status:404,error:new Error("Link not found")}}function h(t){return f("Go to"),[]}class $ extends c{constructor(e){super();i(this,e,h,null,u,{})}}export{$ as default,k as load};
