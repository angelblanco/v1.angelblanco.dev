import{S as c,i,s as u}from"../../chunks/vendor-9f491de5.js";import{s as f}from"../../chunks/meta-57d94e2f.js";import"../../chunks/canonical-4beebdc5.js";function d(t){try{return atob(t)}catch{return Buffer.from(t,"base64").toString()}}function l(t){const r=e=>{throw new Error(`Unable to reverse shortner the provided id "${t}". ${e}`)};try{const e=d(t),n=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(e);n||r("No matches pattern");const[,s,o]=n;return{preffix:s,id:o}}catch(e){r(e)}}async function $({page:t,fetch:r}){const e=t.params;try{let{id:n,preffix:s}=l(e.shortLink);const o=await r(`/api/links/${s}/${n}`);if(o.status===200){const{url:a}=await o.json();return{redirect:a,status:302}}}catch(n){console.log(n)}return{status:404,error:new Error("Link not found")}}function h(t){return f("Go to"),[]}class b extends c{constructor(r){super();i(this,r,h,null,u,{})}}export{b as default,$ as load};
