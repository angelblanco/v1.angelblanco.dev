import{S as t,i as r,s as n,J as e}from"./client.3949b6c2.js";function o(t){const r=r=>{throw new Error(`Unable to reverse shortner the provided id "${t}". ${r}`)};try{const n=function(t){try{return atob(t)}catch{return Buffer.from(t,"base64").toString()}}(t),e=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(n);e||r("No matches pattern");const[,o,s]=e;return{preffix:o,id:s}}catch(t){r(t)}}async function s({params:t}){try{let{id:r,preffix:n}=o(t.shortLink);const e=await this.fetch(`/api/links/${n}/${r}`);if(200===e.status){const{url:t}=await e.json();return this.redirect(302,t)}}catch(t){console.log(t)}this.error(404,"Link not found")}function c(t){return e("Go to"),[]}export default class extends t{constructor(t){super(),r(this,t,c,null,n,{})}}export{s as preload};
