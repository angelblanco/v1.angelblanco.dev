import{u as t,x as r,y as e,_ as n,a as c,b as a,c as o,i as s,d as u,S as i,s as f,U as p}from"./client.58798202.js";function h(r){var e=function(t){throw new Error('Unable to reverse shortner the provided id "'.concat(r,'". ').concat(t))};try{var n=function(t){try{return atob(t)}catch(r){return Buffer.from(t,"base64").toString()}}(r),c=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(n);c||e("No matches pattern");var a=t(c,3);return{preffix:a[1],id:a[2]}}catch(t){e(t)}}function l(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=c(t);if(r){var o=c(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return a(this,e)}}function v(t){return d.apply(this,arguments)}function d(){return(d=r(e.mark((function t(r){var n,c,a,o,s,u,i;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.params,t.prev=1,c=h(n.shortLink),a=c.id,o=c.preffix,t.next=5,this.fetch("/api/links/".concat(o,"/").concat(a));case 5:if(200!==(s=t.sent).status){t.next=12;break}return t.next=9,s.json();case 9:return u=t.sent,i=u.url,t.abrupt("return",this.redirect(302,i));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:this.error(404,"Link not found");case 18:case"end":return t.stop()}}),t,this,[[1,14]])})))).apply(this,arguments)}function x(t){return p("Go to"),[]}var y=function(t){n(e,i);var r=l(e);function e(t){var n;return o(this,e),n=r.call(this),s(u(n),t,x,null,f,{}),n}return e}();export default y;export{v as preload};
