import{S as t,i as r,s as e,K as n}from"./client.fd899e00.js";function o(t){const r=r=>{throw new Error(`Unable to reverse shortner the provided id "${t}". ${r}`)};try{const e=function(t){try{return atob(t)}catch{return Buffer.from(t,"base64").toString()}}(t),n=/^([a-z]+)[0]*\-([1-9][0-9]*)$/.exec(e);n||r("No matches pattern");const[,o,s]=n;return{preffix:o,id:s}}catch(t){r(t)}}async function s({params:t}){try{let{id:r,preffix:e}=o(t.shortLink);const n=await this.fetch(`/api/links/${e}/${r}`);if(200===n.status){const{url:t}=await n.json();return this.redirect(302,t)}}catch(t){console.log(t)}this.error(404,"Link not found")}function i(t){return n("Go to"),[]}export default class extends t{constructor(t){super(),r(this,t,i,null,e,{})}}export{s as preload};
